<view class="container">
  <!-- 用户信息卡片 -->
  <view class="profile-card">
    <button class="avatar-wrapper" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
      <image class="avatar" src="{{displayAvatarUrl || '/images/default_avatar.png'}}"></image>
      <view class="avatar-edit-tip">点击更换头像</view>
    </button>
    
    <view class="info-list">
      <view class="info-item" bind:tap="showNicknameModal">
        <view class="info-label">昵称</view>
        <view class="info-value">{{userInfo.nickName}}</view>
        <view class="arrow">›</view>
      </view>

      <view class="info-item" bind:tap="showRealNameModal">
        <view class="info-label">真实姓名</view>
        <view class="info-value">{{userInfo.realName || '未设置'}}</view>
        <view class="arrow">›</view>
      </view>
    </view>
    
  </view>

  <!-- 我创建的项目列表 -->
  <view class="projects-card">
    <view class="card-title">我创建的项目</view>
    <view wx:if="{{myProjects.length === 0}}" class="empty-tip">暂无创建的项目</view>
    <view wx:for="{{myProjects}}" wx:key="_id" class="project-item" bind:tap="goToProject" data-id="{{item._id}}">
      <view class="project-name">{{item.projectName}}</view>
      <view class="arrow">›</view>
    </view>
  </view>

  <!-- 退出登录按钮 -->
  <button class="logout-btn" bind:tap="handleLogout">退出登录</button>

  <!-- 修改昵称弹窗 -->
  <view class="modal-mask" wx:if="{{showNicknameModal}}">
    <view class="modal-content">
      <view class="modal-title">修改昵称</view>
      <input class="modal-input" type="nickname" value="{{nicknameInput}}" placeholder="请输入昵称" bindinput="onNicknameInput"/>
      <view class="modal-actions">
        <button class="action-btn decline" bind:tap="hideNicknameModal">取消</button>
        <button class="action-btn confirm" bind:tap="onConfirmNicknameChange">确认修改</button>
      </view>
    </view>
  </view>

  <!-- 修改真实姓名弹窗 -->
  <view class="modal-mask" wx:if="{{showNameModal}}">
    <view class="modal-content">
      <view class="modal-title">修改真实姓名</view>
      <input class="modal-input" placeholder="请输入真实姓名" value="{{realNameInput}}" bindinput="onNameInput"/>
      <view class="modal-actions">
        <button class="action-btn decline" bind:tap="hideRealNameModal">取消</button>
        <button class="action-btn confirm" bind:tap="onConfirmNameChange">确认修改</button>
      </view>
    </view>
  </view>
</view>